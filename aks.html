<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enterprise AKS Architecture</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .architecture-container {
            max-width: 1600px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .dependency-toggle {
            position: absolute;
            top: 20px;
            right: 30px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .dependency-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .architecture-layers {
            padding: 30px;
        }

        .layer-section {
            margin-bottom: 40px;
        }

        .layer-title {
            font-size: 1.8rem;
            color: #2c3e50;
            margin-bottom: 20px;
            padding: 15px 0;
            border-bottom: 3px solid #3498db;
            position: relative;
        }

        .layer-title::before {
            content: '';
            position: absolute;
            left: 0;
            bottom: -3px;
            width: 60px;
            height: 3px;
            background: #e74c3c;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .service-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: relative;
            border-left: 4px solid var(--service-color);
            cursor: pointer;
        }

        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .service-card.highlight {
            background: linear-gradient(135deg, var(--service-color), rgba(var(--service-color-rgb), 0.8));
            color: white;
            transform: scale(1.02);
        }

        .service-card.related {
            background: rgba(var(--service-color-rgb), 0.1);
            border-color: var(--service-color);
            border-width: 2px;
        }

        .service-header {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
        }

        .service-icon {
            font-size: 1.5rem;
            margin-right: 12px;
        }

        .service-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2c3e50;
        }

        .service-card.highlight .service-name {
            color: white;
        }

        .service-type {
            font-size: 0.8rem;
            color: #7f8c8d;
            margin-bottom: 8px;
            text-transform: uppercase;
            font-weight: 500;
        }

        .service-card.highlight .service-type {
            color: rgba(255, 255, 255, 0.8);
        }

        .service-description {
            font-size: 0.9rem;
            color: #5a6c7d;
            line-height: 1.4;
            margin-bottom: 12px;
        }

        .service-card.highlight .service-description {
            color: rgba(255, 255, 255, 0.9);
        }

        .service-specs {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .spec-tag {
            background: rgba(var(--service-color-rgb), 0.1);
            color: var(--service-color);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .service-card.highlight .spec-tag {
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .dependency-info {
            position: fixed;
            top: 20px;
            left: 20px;
            right: 20px;
            background: rgba(44, 62, 80, 0.95);
            color: white;
            padding: 20px;
            border-radius: 15px;
            z-index: 1000;
            transform: translateY(-100px);
            opacity: 0;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .dependency-info.visible {
            transform: translateY(0);
            opacity: 1;
        }

        .dependency-close {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Layer-specific colors */
        .external-access { --service-color: #3498db; --service-color-rgb: 52, 152, 219; }
        .network-security { --service-color: #e74c3c; --service-color-rgb: 231, 76, 60; }
        .identity-access { --service-color: #9b59b6; --service-color-rgb: 155, 89, 182; }
        .container-security { --service-color: #e67e22; --service-color-rgb: 230, 126, 34; }
        .aks-core { --service-color: #27ae60; --service-color-rgb: 39, 174, 96; }
        .data-services { --service-color: #f39c12; --service-color-rgb: 243, 156, 18; }
        .storage-services { --service-color: #2980b9; --service-color-rgb: 41, 128, 185; }
        .monitoring { --service-color: #16a085; --service-color-rgb: 22, 160, 133; }
        .observability { --service-color: #8e44ad; --service-color-rgb: 142, 68, 173; }
        .devops-automation { --service-color: #d35400; --service-color-rgb: 211, 84, 0; }
        .compliance-governance { --service-color: #c0392b; --service-color-rgb: 192, 57, 43; }
        .backup-dr { --service-color: #7f8c8d; --service-color-rgb: 127, 140, 141; }

        .layer-flow {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background: rgba(52, 152, 219, 0.1);
            border-radius: 10px;
            border: 2px dashed #3498db;
        }

        .flow-text {
            color: #2c3e50;
            font-weight: 500;
            font-size: 1.1rem;
        }

        .flow-arrow {
            color: #3498db;
            font-size: 1.5rem;
            margin: 0 15px;
        }

        .relationships-panel {
            position: fixed;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            width: 300px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            opacity: 0;
            transform: translateY(-50%) translateX(100px);
            transition: all 0.3s ease;
        }

        .relationships-panel.visible {
            opacity: 1;
            transform: translateY(-50%) translateX(0);
        }

        .relationships-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ecf0f1;
        }

        .relationship-group {
            margin-bottom: 15px;
        }

        .relationship-type {
            font-size: 0.9rem;
            font-weight: 600;
            color: #7f8c8d;
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        .relationship-list {
            list-style: none;
        }

        .relationship-item {
            padding: 5px 0;
            color: #2c3e50;
            font-size: 0.9rem;
            border-left: 3px solid transparent;
            padding-left: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .relationship-item:hover {
            border-left-color: #3498db;
            background: rgba(52, 152, 219, 0.1);
            padding-left: 15px;
        }

        @media (max-width: 768px) {
            .services-grid {
                grid-template-columns: 1fr;
            }
            
            .dependency-toggle {
                position: static;
                margin-top: 15px;
                display: inline-block;
            }

            .relationships-panel {
                width: calc(100% - 40px);
                left: 20px;
                right: 20px;
                top: auto;
                bottom: 20px;
                transform: translateY(100px);
            }

            .relationships-panel.visible {
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <div class="architecture-container">
        <div class="header">
            <h1>Enterprise AKS Architecture</h1>
            <p>Production-Ready, Scalable & Secure Kubernetes Platform</p>
            <button class="dependency-toggle" onclick="toggleDependencyMode()">
                üîó Show Dependencies
            </button>
        </div>

        <div class="architecture-layers">
            <!-- External Access Layer -->
            <div class="layer-section">
                <h2 class="layer-title">üåê External Access Layer</h2>
                <div class="services-grid">
                    <div class="service-card external-access" data-service-id="front-door">
                        <div class="service-header">
                            <span class="service-icon">üåê</span>
                            <span class="service-name">Azure Front Door</span>
                        </div>
                        <div class="service-type">PaaS - CDN & Security</div>
                        <div class="service-description">Global content delivery network with integrated Web Application Firewall and DDoS protection</div>
                        <div class="service-specs">
                            <span class="spec-tag">Premium SKU</span>
                            <span class="spec-tag">WAF v2</span>
                            <span class="spec-tag">SSL Termination</span>
                        </div>
                    </div>

                    <div class="service-card external-access" data-service-id="dns">
                        <div class="service-header">
                            <span class="service-icon">üîç</span>
                            <span class="service-name">Azure DNS</span>
                        </div>
                        <div class="service-type">PaaS - DNS Service</div>
                        <div class="service-description">Authoritative DNS service with private DNS zones for internal name resolution</div>
                        <div class="service-specs">
                            <span class="spec-tag">Private Zones</span>
                            <span class="spec-tag">Auto Registration</span>
                        </div>
                    </div>

                    <div class="service-card external-access" data-service-id="app-gateway">
                        <div class="service-header">
                            <span class="service-icon">‚öñÔ∏è</span>
                            <span class="service-name">Application Gateway v2</span>
                        </div>
                        <div class="service-type">PaaS - Layer 7 Load Balancer</div>
                        <div class="service-description">Regional load balancer with SSL termination, path-based routing, and WAF</div>
                        <div class="service-specs">
                            <span class="spec-tag">Standard_v2</span>
                            <span class="spec-tag">Private IP</span>
                            <span class="spec-tag">Auto-scaling</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="layer-flow">
                <div class="flow-text">
                    Internet Traffic <span class="flow-arrow">‚Üì</span> Front Door <span class="flow-arrow">‚Üì</span> Application Gateway <span class="flow-arrow">‚Üì</span> AKS Ingress
                </div>
            </div>

            <!-- Network Security Layer -->
            <div class="layer-section">
                <h2 class="layer-title">üîí Network Security & Connectivity</h2>
                <div class="services-grid">
                    <div class="service-card network-security" data-service-id="firewall">
                        <div class="service-header">
                            <span class="service-icon">üõ°Ô∏è</span>
                            <span class="service-name">Azure Firewall Premium</span>
                        </div>
                        <div class="service-type">PaaS - Network Security</div>
                        <div class="service-description">Centralized network security with IDPS, TLS inspection, and URL filtering</div>
                        <div class="service-specs">
                            <span class="spec-tag">Premium SKU</span>
                            <span class="spec-tag">IDPS</span>
                            <span class="spec-tag">TLS Inspection</span>
                        </div>
                    </div>

                    <div class="service-card network-security" data-service-id="expressroute">
                        <div class="service-header">
                            <span class="service-icon">üîó</span>
                            <span class="service-name">ExpressRoute</span>
                        </div>
                        <div class="service-type">IaaS - Private Connectivity</div>
                        <div class="service-description">Dedicated private connection to Azure with predictable bandwidth and latency</div>
                        <div class="service-specs">
                            <span class="spec-tag">1 Gbps</span>
                            <span class="spec-tag">99.95% SLA</span>
                            <span class="spec-tag">BGP Routing</span>
                        </div>
                    </div>

                    <div class="service-card network-security" data-service-id="vnet">
                        <div class="service-header">
                            <span class="service-icon">üèóÔ∏è</span>
                            <span class="service-name">Hub-Spoke VNet</span>
                        </div>
                        <div class="service-type">IaaS - Network Architecture</div>
                        <div class="service-description">Centralized hub for shared services with spoke networks for workload isolation</div>
                        <div class="service-specs">
                            <span class="spec-tag">Hub: 10.0.0.0/16</span>
                            <span class="spec-tag">Spoke: 10.1.0.0/16</span>
                            <span class="spec-tag">VNet Peering</span>
                        </div>
                    </div>

                    <div class="service-card network-security" data-service-id="bastion">
                        <div class="service-header">
                            <span class="service-icon">üö™</span>
                            <span class="service-name">Azure Bastion</span>
                        </div>
                        <div class="service-type">PaaS - Secure Access</div>
                        <div class="service-description">Browser-based secure access to VMs without exposing RDP/SSH ports</div>
                        <div class="service-specs">
                            <span class="spec-tag">Standard SKU</span>
                            <span class="spec-tag">Native Client</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Identity & Access Management -->
            <div class="layer-section">
                <h2 class="layer-title">üë§ Identity & Access Management</h2>
                <div class="services-grid">
                    <div class="service-card identity-access" data-service-id="aad">
                        <div class="service-header">
                            <span class="service-icon">üîê</span>
                            <span class="service-name">Azure Active Directory</span>
                        </div>
                        <div class="service-type">PaaS - Identity Provider</div>
                        <div class="service-description">Cloud-based identity and access management with Premium P2 features</div>
                        <div class="service-specs">
                            <span class="spec-tag">Premium P2</span>
                            <span class="spec-tag">Conditional Access</span>
                            <span class="spec-tag">PIM</span>
                        </div>
                    </div>

                    <div class="service-card identity-access" data-service-id="workload-identity">
                        <div class="service-header">
                            <span class="service-icon">üè∑Ô∏è</span>
                            <span class="service-name">Workload Identity</span>
                        </div>
                        <div class="service-type">PaaS - Pod Authentication</div>
                        <div class="service-description">Secure authentication for pods using Azure AD without storing credentials</div>
                        <div class="service-specs">
                            <span class="spec-tag">OIDC Federation</span>
                            <span class="spec-tag">No Secrets</span>
                        </div>
                    </div>

                    <div class="service-card identity-access" data-service-id="rbac">
                        <div class="service-header">
                            <span class="service-icon">üéØ</span>
                            <span class="service-name">Kubernetes RBAC</span>
                        </div>
                        <div class="service-type">Platform - Authorization</div>
                        <div class="service-description">Fine-grained access control integrated with Azure AD for role-based permissions</div>
                        <div class="service-specs">
                            <span class="spec-tag">Cluster Admin</span>
                            <span class="spec-tag">Namespace Isolation</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Container & Security Services -->
            <div class="layer-section">
                <h2 class="layer-title">üõ°Ô∏è Container & Security Services</h2>
                <div class="services-grid">
                    <div class="service-card container-security" data-service-id="acr">
                        <div class="service-header">
                            <span class="service-icon">üì¶</span>
                            <span class="service-name">Azure Contai
<div class="service-header">
                            <span class="service-icon">üìà</span>
                            <span class="service-name">Azure Monitor</span>
                        </div>
                        <div class="service-type">PaaS - Platform Monitoring</div>
                        <div class="service-description">Comprehensive monitoring solution for infrastructure and applications</div>
                        <div class="service-specs">
                            <span class="spec-tag">Metrics</span>
                            <span class="spec-tag">Alerts</span>
                            <span class="spec-tag">Dashboards</span>
                        </div>
                    </div>

                    <div class="service-card monitoring" data-service-id="log-analytics">
                        <div class="service-header">
                            <span class="service-icon">üìã</span>
                            <span class="service-name">Log Analytics Workspace</span>
                        </div>
                        <div class="service-type">PaaS - Log Aggregation</div>
                        <div class="service-description">Centralized logging with KQL queries and 2-year retention</div>
                        <div class="service-specs">
                            <span class="spec-tag">KQL Queries</span>
                            <span class="spec-tag">2-Year Retention</span>
                            <span class="spec-tag">Pay-per-GB</span>
                        </div>
                    </div>

                    <div class="service-card monitoring" data-service-id="app-insights">
                        <div class="service-header">
                            <span class="service-icon">üîç</span>
                            <span class="service-name">Application Insights</span>
                        </div>
                        <div class="service-type">PaaS - APM</div>
                        <div class="service-description">Application performance monitoring with distributed tracing</div>
                        <div class="service-specs">
                            <span class="spec-tag">Distributed Tracing</span>
                            <span class="spec-tag">Live Metrics</span>
                            <span class="spec-tag">Smart Detection</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Observability -->
            <div class="layer-section">
                <h2 class="layer-title">üîç Observability Stack</h2>
                <div class="services-grid">
                    <div class="service-card observability" data-service-id="prometheus">
                        <div class="service-header">
                            <span class="service-icon">üìä</span>
                            <span class="service-name">Prometheus</span>
                        </div>
                        <div class="service-type">Open Source - Metrics</div>
                        <div class="service-description">Time-series database for metrics collection and alerting</div>
                        <div class="service-specs">
                            <span class="spec-tag">PromQL</span>
                            <span class="spec-tag">Service Discovery</span>
                            <span class="spec-tag">High Availability</span>
                        </div>
                    </div>

                    <div class="service-card observability" data-service-id="grafana">
                        <div class="service-header">
                            <span class="service-icon">üìà</span>
                            <span class="service-name">Grafana</span>
                        </div>
                        <div class="service-type">Open Source - Visualization</div>
                        <div class="service-description">Analytics and monitoring platform with rich dashboards</div>
                        <div class="service-specs">
                            <span class="spec-tag">Custom Dashboards</span>
                            <span class="spec-tag">Multi-datasource</span>
                            <span class="spec-tag">Alerting</span>
                        </div>
                    </div>

                    <div class="service-card observability" data-service-id="jaeger">
                        <div class="service-header">
                            <span class="service-icon">üîó</span>
                            <span class="service-name">Jaeger</span>
                        </div>
                        <div class="service-type">Open Source - Tracing</div>
                        <div class="service-description">Distributed tracing system for monitoring microservices</div>
                        <div class="service-specs">
                            <span class="spec-tag">OpenTracing</span>
                            <span class="spec-tag">Service Map</span>
                            <span class="spec-tag">Performance Analysis</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- DevOps & Automation -->
            <div class="layer-section">
                <h2 class="layer-title">üöÄ DevOps & Automation</h2>
                <div class="services-grid">
                    <div class="service-card devops-automation" data-service-id="azure-devops">
                        <div class="service-header">
                            <span class="service-icon">üîÑ</span>
                            <span class="service-name">Azure DevOps</span>
                        </div>
                        <div class="service-type">PaaS - CI/CD Platform</div>
                        <div class="service-description">Complete DevOps platform with pipelines, repos, and project management</div>
                        <div class="service-specs">
                            <span class="spec-tag">YAML Pipelines</span>
                            <span class="spec-tag">Git Repos</span>
                            <span class="spec-tag">Artifacts</span>
                        </div>
                    </div>

                    <div class="service-card devops-automation" data-service-id="gitops">
                        <div class="service-header">
                            <span class="service-icon">üîÄ</span>
                            <span class="service-name">GitOps (Flux)</span>
                        </div>
                        <div class="service-type">Platform - Deployment</div>
                        <div class="service-description">Git-based deployment automation with reconciliation loops</div>
                        <div class="service-specs">
                            <span class="spec-tag">Flux v2</span>
                            <span class="spec-tag">Auto-sync</span>
                            <span class="spec-tag">Multi-tenancy</span>
                        </div>
                    </div>

                    <div class="service-card devops-automation" data-service-id="helm">
                        <div class="service-header">
                            <span class="service-icon">‚õµ</span>
                            <span class="service-name">Helm</span>
                        </div>
                        <div class="service-type">Platform - Package Manager</div>
                        <div class="service-description">Kubernetes package manager for templating and versioning</div>
                        <div class="service-specs">
                            <span class="spec-tag">Helm v3</span>
                            <span class="spec-tag">Chart Repository</span>
                            <span class="spec-tag">Rollback Support</span>
                        </div>
                    </div>

                    <div class="service-card devops-automation" data-service-id="terraform">
                        <div class="service-header">
                            <span class="service-icon">üèóÔ∏è</span>
                            <span class="service-name">Terraform</span>
                        </div>
                        <div class="service-type">Platform - IaC</div>
                        <div class="service-description">Infrastructure as Code with state management and planning</div>
                        <div class="service-specs">
                            <span class="spec-tag">Azure Provider</span>
                            <span class="spec-tag">Remote State</span>
                            <span class="spec-tag">Modules</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Compliance & Governance -->
            <div class="layer-section">
                <h2 class="layer-title">üìã Compliance & Governance</h2>
                <div class="services-grid">
                    <div class="service-card compliance-governance" data-service-id="azure-policy-governance">
                        <div class="service-header">
                            <span class="service-icon">üìú</span>
                            <span class="service-name">Azure Policy</span>
                        </div>
                        <div class="service-type">PaaS - Policy Management</div>
                        <div class="service-description">Enterprise governance with built-in and custom policy definitions</div>
                        <div class="service-specs">
                            <span class="spec-tag">Built-in Policies</span>
                            <span class="spec-tag">Compliance Dashboard</span>
                            <span class="spec-tag">Remediation</span>
                        </div>
                    </div>

                    <div class="service-card compliance-governance" data-service-id="cost-management">
                        <div class="service-header">
                            <span class="service-icon">üí∞</span>
                            <span class="service-name">Cost Management</span>
                        </div>
                        <div class="service-type">PaaS - FinOps</div>
                        <div class="service-description">Cost optimization with budgets, alerts, and recommendations</div>
                        <div class="service-specs">
                            <span class="spec-tag">Budget Alerts</span>
                            <span class="spec-tag">Cost Analysis</span>
                            <span class="spec-tag">Recommendations</span>
                        </div>
                    </div>

                    <div class="service-card compliance-governance" data-service-id="purview">
                        <div class="service-header">
                            <span class="service-icon">üîç</span>
                            <span class="service-name">Microsoft Purview</span>
                        </div>
                        <div class="service-type">PaaS - Data Governance</div>
                        <div class="service-description">Unified data governance with cataloging and compliance</div>
                        <div class="service-specs">
                            <span class="spec-tag">Data Catalog</span>
                            <span class="spec-tag">Lineage Tracking</span>
                            <span class="spec-tag">Compliance Reporting</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Backup & Disaster Recovery -->
            <div class="layer-section">
                <h2 class="layer-title">üíæ Backup & Disaster Recovery</h2>
                <div class="services-grid">
                    <div class="service-card backup-dr" data-service-id="azure-backup">
                        <div class="service-header">
                            <span class="service-icon">üíæ</span>
                            <span class="service-name">Azure Backup</span>
                        </div>
                        <div class="service-type">PaaS - Backup Service</div>
                        <div class="service-description">Cloud-native backup for AKS workloads and persistent volumes</div>
                        <div class="service-specs">
                            <span class="spec-tag">AKS Extension</span>
                            <span class="spec-tag">PV Backup</span>
                            <span class="spec-tag">Cross-region</span>
                        </div>
                    </div>

                    <div class="service-card backup-dr" data-service-id="site-recovery">
                        <div class="service-header">
                            <span class="service-icon">üîÑ</span>
                            <span class="service-name">Azure Site Recovery</span>
                        </div>
                        <div class="service-type">PaaS - Disaster Recovery</div>
                        <div class="service-description">Business continuity with automated failover and recovery</div>
                        <div class="service-specs">
                            <span class="spec-tag">RTO < 2 hours</span>
                            <span class="spec-tag">RPO < 15 minutes</span>
                            <span class="spec-tag">Automated Failover</span>
                        </div>
                    </div>

                    <div class="service-card backup-dr" data-service-id="velero">
                        <div class="service-header">
                            <span class="service-icon">‚õëÔ∏è</span>
                            <span class="service-name">Velero</span>
                        </div>
                        <div class="service-type">Open Source - K8s Backup</div>
                        <div class="service-description">Kubernetes-native backup and restore with disaster recovery</div>
                        <div class="service-specs">
                            <span class="spec-tag">Cluster Backup</span>
                            <span class="spec-tag">Volume Snapshots</span>
                            <span class="spec-tag">Migration Support</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Relationships Panel -->
        <div class="relationships-panel" id="relationshipsPanel">
            <div class="relationships-title" id="relationshipsTitle">Service Dependencies</div>
            <div class="relationship-group">
                <div class="relationship-type">Depends On</div>
                <ul class="relationship-list" id="dependsOnList"></ul>
            </div>
            <div class="relationship-group">
                <div class="relationship-type">Used By</div>
                <ul class="relationship-list" id="usedByList"></ul>
            </div>
            <div class="relationship-group">
                <div class="relationship-type">Integrates With</div>
                <ul class="relationship-list" id="integratesList"></ul>
            </div>
            <button class="dependency-close" onclick="hideRelationships()">√ó</button>
        </div>

        <div class="dependency-info" id="dependencyInfo">
            <button class="dependency-close" onclick="hideDependencyMode()">√ó</button>
            <h3>üîó Dependency Mode Active</h3>
            <p>Click on any service card to see its relationships with other services. Related services will be highlighted automatically.</p>
        </div>
    </div>

    <script>
        let dependencyMode = false;
        let activeService = null;

        // Service relationships data
        const serviceRelationships = {
            'front-door': {
                dependsOn: ['dns'],
                usedBy: ['app-gateway'],
                integratesWith: ['azure-monitor', 'log-analytics']
            },
            'app-gateway': {
                dependsOn: ['front-door', 'vnet', 'dns'],
                usedBy: ['ingress'],
                integratesWith: ['azure-monitor', 'keyvault', 'log-analytics']
            },
            'dns': {
                dependsOn: [],
                usedBy: ['front-door', 'app-gateway', 'aks-cluster'],
                integratesWith: ['vnet']
            },
            'firewall': {
                dependsOn: ['vnet'],
                usedBy: ['aks-cluster', 'system-nodepool', 'user-nodepool'],
                integratesWith: ['azure-monitor', 'log-analytics']
            },
            'expressroute': {
                dependsOn: [],
                usedBy: ['vnet', 'bastion'],
                integratesWith: ['azure-monitor']
            },
            'vnet': {
                dependsOn: ['expressroute'],
                usedBy: ['firewall', 'app-gateway', 'aks-cluster', 'bastion'],
                integratesWith: ['dns', 'azure-monitor']
            },
            'bastion': {
                dependsOn: ['vnet', 'expressroute'],
                usedBy: [],
                integratesWith: ['aad', 'azure-monitor']
            },
            'aad': {
                dependsOn: [],
                usedBy: ['aks-cluster', 'workload-identity', 'rbac', 'bastion'],
                integratesWith: ['azure-monitor', 'log-analytics']
            },
            'workload-identity': {
                dependsOn: ['aad', 'aks-cluster'],
                usedBy: [],
                integratesWith: ['keyvault', 'acr']
            },
            'rbac': {
                dependsOn: ['aad', 'aks-cluster'],
                usedBy: [],
                integratesWith: ['azure-monitor']
            },
            'acr': {
                dependsOn: ['vnet', 'keyvault'],
                usedBy: ['aks-cluster', 'azure-devops'],
                integratesWith: ['workload-identity', 'defender', 'azure-monitor']
            },
            'keyvault': {
                dependsOn: ['vnet', 'aad'],
                usedBy: ['aks-cluster', 'app-gateway', 'acr'],
                integratesWith: ['workload-identity', 'azure-monitor', 'policy']
            },
            'defender': {
                dependsOn: ['aks-cluster'],
                usedBy: [],
                integratesWith: ['acr', 'azure-monitor', 'log-analytics']
            },
            'policy': {
                dependsOn: ['aks-cluster'],
                usedBy: [],
                integratesWith: ['keyvault', 'azure-monitor', 'cost-management']
            },
            'aks-cluster': {
                dependsOn: ['vnet', 'aad', 'acr', 'keyvault', 'dns'],
                usedBy: ['system-nodepool', 'user-nodepool', 'virtual-nodes', 'service-mesh', 'ingress'],
                integratesWith: ['azure-monitor', 'log-analytics', 'prometheus', 'defender', 'policy']
            },
            'system-nodepool': {
                dependsOn: ['aks-cluster', 'firewall'],
                usedBy: [],
                integratesWith: ['azure-monitor', 'prometheus']
            },
            'user-nodepool': {
                dependsOn: ['aks-cluster', 'firewall'],
                usedBy: [],
                integratesWith: ['azure-monitor', 'prometheus', 'storage-account']
            },
            'virtual-nodes': {
                dependsOn: ['aks-cluster', 'vnet'],
                usedBy: [],
                integratesWith: ['azure-monitor']
            },
            'service-mesh': {
                dependsOn: ['aks-cluster'],
                usedBy: [],
                integratesWith: ['prometheus', 'jaeger', 'grafana']
            },
            'postgresql': {
                dependsOn: ['vnet'],
                usedBy: [],
                integratesWith: ['aks-cluster', 'azure-monitor', 'azure-backup']
            },
            'cosmosdb': {
                dependsOn: ['vnet'],
                usedBy: [],
                integratesWith: ['aks-cluster', 'azure-monitor', 'azure-backup']
            },
            'redis': {
                dependsOn: ['vnet'],
                usedBy: [],
                integratesWith: ['aks-cluster', 'azure-monitor']
            },
            'sql-database': {
                dependsOn: ['vnet'],
                usedBy: [],
                integratesWith: ['aks-cluster', 'azure-monitor', 'azure-backup']
            },
            'storage-account': {
                dependsOn: ['vnet'],
                usedBy: ['user-nodepool', 'aks-cluster'],
                integratesWith: ['azure-monitor', 'azure-backup']
            },
            'azure-files': {
                dependsOn: ['storage-account'],
                usedBy: ['aks-cluster'],
                integratesWith: ['azure-monitor']
            },
            'blob-storage': {
                dependsOn: ['storage-account'],
                usedBy: ['aks-cluster', 'azure-backup'],
                integratesWith: ['azure-monitor']
            },
            'data-lake': {
                dependsOn: ['storage-account'],
                usedBy: [],
                integratesWith: ['purview', 'azure-monitor']
            },
            'azure-monitor': {
                dependsOn: [],
                usedBy: [],
                integratesWith: ['log-analytics', 'app-insights', 'prometheus', 'grafana']
            },
            'log-analytics': {
                dependsOn: ['azure-monitor'],
                usedBy: ['aks-cluster', 'app-insights'],
                integratesWith: ['prometheus', 'defender']
            },
            'app-insights': {
                dependsOn: ['log-analytics'],
                usedBy: [],
                integratesWith: ['azure-monitor', 'aks-cluster']
            },
            'prometheus': {
                dependsOn: ['aks-cluster'],
                usedBy: ['grafana'],
                integratesWith: ['azure-monitor', 'log-analytics', 'service-mesh']
            },
            'grafana': {
                dependsOn: ['prometheus'],
                usedBy: [],
                integratesWith: ['azure-monitor', 'service-mesh']
            },
            'jaeger': {
                dependsOn: ['aks-cluster'],
                usedBy: [],
                integratesWith: ['service-mesh', 'app-insights']
            },
            'azure-devops': {
                dependsOn: ['acr'],
                usedBy: ['aks-cluster'],
                integratesWith: ['gitops', 'helm', 'terraform']
            },
            'gitops': {
                dependsOn: ['aks-cluster'],
                usedBy: [],
                integratesWith: ['azure-devops', 'helm']
            },
            'helm': {
                dependsOn: ['aks-cluster'],
                usedBy: ['gitops'],
                integratesWith: ['azure-devops', 'acr']
            },
            'terraform': {
                dependsOn: [],
                usedBy: ['aks-cluster', 'vnet', 'storage-account'],
                integratesWith: ['azure-devops']
            },
            'azure-policy-governance': {
                dependsOn: [],
                usedBy: ['aks-cluster'],
                integratesWith: ['cost-management', 'purview']
            },
            'cost-management': {
                dependsOn: [],
                usedBy: [],
                integratesWith: ['azure-policy-governance', 'azure-monitor']
            },
            'purview': {
                dependsOn: [],
                usedBy: [],
                integratesWith: ['data-lake', 'azure-policy-governance']
            },
            'azure-backup': {
                dependsOn: ['storage-account'],
                usedBy: [],
                integratesWith: ['aks-cluster', 'postgresql', 'cosmosdb', 'sql-database']
            },
            'site-recovery': {
                dependsOn: ['storage-account'],
                usedBy: [],
                integratesWith: ['aks-cluster', 'azure-monitor']
            },
            'velero': {
                dependsOn: ['aks-cluster', 'storage-account'],
                usedBy: [],
                integratesWith: ['azure-backup']
            }
        };

        function toggleDependencyMode() {
            dependencyMode = !dependencyMode;
            const info = document.getElementById('dependencyInfo');
            const button = document.querySelector('.dependency-toggle');
            
            if (dependencyMode) {
                info.classList.add('visible');
                button.textContent = 'üîó Hide Dependencies';
                button.style.background = 'rgba(231, 76, 60, 0.8)';
            } else {
                info.classList.remove('visible');
                button.textContent = 'üîó Show Dependencies';
                button.style.background = 'rgba(255, 255, 255, 0.2)';
                clearHighlights();
                hideRelationships();
            }
        }

        function hideDependencyMode() {
            dependencyMode = false;
            document.getElementById('dependencyInfo').classList.remove('visible');
            document.querySelector('.dependency-toggle').textContent = 'üîó Show Dependencies';
            document.querySelector('.dependency-toggle').style.background = 'rgba(255, 255, 255, 0.2)';
            clearHighlights();
            hideRelationships();
        }

        function showRelationships(serviceId) {
            if (!dependencyMode && !serviceRelationships[serviceId]) return;
            
            activeService = serviceId;
            const relationships = serviceRelationships[serviceId] || { dependsOn: [], usedBy: [], integratesWith: [] };
            
            // Clear previous highlights
            clearHighlights();
            
            // Highlight current service
            const currentCard = document.querySelector(`[data-service-id="${serviceId}"]`);
            if (currentCard) {
                currentCard.classList.add('highlight');
            }
            
            // Highlight related services
            const allRelated = [...relationships.dependsOn, ...relationships.usedBy, ...relationships.integratesWith];
            allRelated.forEach(relatedId => {
                const relatedCard = document.querySelector(`[data-service-id="${relatedId}"]`);
                if (relatedCard) {
                    relatedCard.classList.add('related');
                }
            });
            
            // Show relationships panel
            const panel = document.getElementById('relationshipsPanel');
            const title = document.getElementById('relationshipsTitle');
            const dependsOnList = document.getElementById('dependsOnList');
            const usedByList = document.getElementById('usedByList');
            const integratesList = document.getElementById('integratesList');
            
            title.textContent = `${getServiceName(serviceId)} Dependencies`;
            
            // Populate lists
            populateRelationshipList(dependsOnList, relationships.dependsOn);
            populateRelationshipList(usedByList, relationships.usedBy);
            populateRelationshipList(integratesList, relationships.integratesWith);
            
            panel.classList.add('visible');
        }

        function populateRelationshipList(listElement, serviceIds) {
            listElement.innerHTML = '';
            if (serviceIds.length === 0) {
                const li = document.createElement('li');
                li.className = 'relationship-item';
                li.textContent = 'None';
                li.style.color = '#bdc3c7';
                listElement.appendChild(li);
                return;
            }
            
            serviceIds.forEach(serviceId => {
                const li = document.createElement('li');
                li.className = 'relationship-item';
                li.textContent = getServiceName(serviceId);
                li.onclick = () => showRelationships(serviceId);
                listElement.appendChild(li);
            });
        }

        function getServiceName(serviceId) {
            const serviceCard = document.querySelector(`[data-service-id="${serviceId}"]`);
            if (serviceCard) {
                const nameElement = serviceCard.querySelector('.service-name');
                return nameElement ? nameElement.textContent : serviceId;
            }
            return serviceId;
        }

        function clearHighlights() {
            document.querySelectorAll('.service-card').forEach(card => {
                card.classList.remove('highlight', 'related');
            });
        }

        function hideRelationships() {
            document.getElementById('relationshipsPanel').classList.remove('visible');
            clearHighlights();
            activeService = null;
        }

        // Add click handlers to all service cards
        document.querySelectorAll('.service-card[data-service-id]').forEach(card => {
            card.addEventListener('click', (e) => {
                e.stopPropagation();
                const serviceId = card.getAttribute('data-service-id');
                showRelationships(serviceId);
            });
        });

        // Close relationships panel when clicking outside
        document.addEventListener('click', (e) => {
            const panel = document.getElementById('relationshipsPanel');
            const isClickInsidePanel = panel.contains(e.target);
            const isClickOnServiceCard = e.target.closest('.service-card[data-service-id]');
            
            if (!isClickInsidePanel && !isClickOnServiceCard && panel.classList.contains('visible')) {
                hideRelationships();
            }
        });

        // Prevent panel clicks from closing it
        document.getElementById('relationshipsPanel').addEventListener('click', (e) => {
            e.stopPropagation();
        });
    </script>
</body>
</html>